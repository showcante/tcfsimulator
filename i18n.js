const I18N = {
  en: {
    nav_brand: 'TCF Simulator',
    nav_home: 'Home',
    nav_practice: 'Practice Exam',
    nav_listening: 'Listening',
    nav_reading: 'Reading',
    nav_writing: 'Writing',
    nav_speaking: 'Speaking',
    lang_button: 'English ðŸ‡¨ðŸ‡¦',
    lang_option_en: 'English ðŸ‡¨ðŸ‡¦',
    lang_option_fr: 'FranÃ§ais (QuÃ©bec)',

    home_eyebrow: 'TCF Canada Preparation',
    home_title: 'Prepare for the TCF Canada Exam',
    home_lead:
      'Train speaking, writing, reading, and listening in one place with a full simulation approach that mirrors real exam pressure. Switch between monthly question banks, replay oral prompts, and capture your spoken answers with transcription tools to review pronunciation, fluency, and structure. Build better habits with timed writing tasks, copy-ready evaluation prompts, and targeted external resources so each practice session gives you clear progress toward a stronger CEFR and NCLC performance.',
    home_what_title: 'What Is TCF Canada?',
    home_what_body:
      'TCF Canada is a French-language proficiency test recognized by Canadian authorities for economic immigration and citizenship applications. It evaluates your level from A1 to C2 based on the CEFR framework.',
    home_exam_title: 'Exam Structure (Click To Expand)',
    home_docs_title: 'Documents For Consultation',
    home_docs_manual: "TCF Candidate's Manual (Download)",
    home_docs_sheet: 'TCF Canada Presentation Sheet (Download)',
    home_key_title: 'Key Facts',
    home_key_1: 'Total duration is approximately 2 hours 47 minutes.',
    home_key_2: 'All 4 modules are mandatory for TCF Canada.',
    home_key_3: 'Results are generally issued to test centers within 15 working days.',
    home_key_4: 'Certificates are valid for 2 years.',
    home_key_hint: 'This summary follows the official TCF Canada structure published by France Education International.',

    acc_listening_title: 'Listening comprehension',
    acc_reading_title: 'Reading comprehension',
    acc_speaking_title: 'Speaking skills',
    acc_writing_title: 'Writing skills',

    listen_page_title: 'Listening Practice Resources',
    listen_page_lead: 'Use these external resources to train for the TCF Canada listening module.',
    listen_res1_title: 'FreeTCF Listening Tests',
    listen_res1_desc: 'Practice-style listening sets with TCF-like multiple-choice format for timed training.',
    listen_res2_title: 'TV5MONDE - TCF Preparation',
    listen_res2_desc:
      'Structured learning activities for TCF preparation, including audio comprehension exercises at different levels.',
    listen_res3_title: 'RFI FranÃ§ais Facile - DiplÃ´mes & Tests',
    listen_res3_desc:
      'French listening and language training content useful for exam listening reflexes and vocabulary building.',
    read_page_title: 'Reading Practice Resources',
    read_page_lead: 'Train reading comprehension strategies and speed for TCF Canada.',
    read_res1_title: 'TV5MONDE - TCF Preparation',
    read_res1_desc:
      'Use this page for TCF prep and click into reading comprehension activities to practice understanding short and long written texts.',
    read_res2_title: 'FreeTCF Reading Tests',
    read_res2_desc:
      'Practice-oriented reading tests in a TCF-like question style to improve time management and answer accuracy.',
    writing_page_title: 'Writing Practice',
    writing_page_lead: 'Simulate the 3 writing tasks with timer and word counter.',
    writing_panel_title: 'Writing',
    writing_panel_lead: 'Three tasks with shared timer and word counters.',
    writing_total_time: 'Total Time',
    writing_task1_hint: 'Write a short practical message (email/note style).',
    writing_task2_hint: 'Write an argument/opinion text with clear structure.',
    writing_task3_hint: 'Write a comparison/analysis response with examples.',
    writing_task1_placeholder: 'Write your Task 1 response...',
    writing_task2_placeholder: 'Write your Task 2 response...',
    writing_task3_placeholder: 'Write your Task 3 response...',
    writing_copy_hint:
      'After finishing this task, please click on the button and paste it to your favorite AI to evaluate your performance!',
    speaking_page_title: 'Speaking Practice',
    speaking_page_lead: 'Task 2 and Task 3 oral prompt practice with Gemini TTS and Google STT.',
    speaking_panel_title: 'Speaking',
    speaking_panel_lead: 'Task 2 and Task 3 oral prompts, replay, and live transcription.',
    speaking_warning_note:
      'The recordings are limited to just 1 minute. Our developers are working to improve, stay tuned!',
    speaking_audio_settings: 'Prompt Audio Settings',
    speaking_hint_api: 'Use Gemini mode when running through local server with GEMINI_API_KEY.',
    speaking_hint_replay: 'Prompt is read aloud. Use replay if needed.',
    speaking_task2_duration: 'This task lasts 3:30.',
    speaking_task3_duration: 'This task lasts 4:30.',
    speaking_transcript_placeholder: 'Your speaking transcript appears here...',
    label_tts_provider: 'TTS Provider',
    label_gemini_voice: 'Gemini Voice',
    label_transcription_lang: 'Transcription Language',
    label_transcription_engine: 'Transcription Engine',
    label_task2_mode: 'Task 2 Engine',
    label_task2_ws_url: 'Task 2 Vertex WS URL',
    label_transcript: 'Transcript',
    label_response: 'Response',
    opt_tts_gemini: 'Gemini TTS (server)',
    opt_tts_browser: 'Browser Voice (offline)',
    opt_lang_frfr: 'French (France)',
    opt_lang_frca: 'French (Canada)',
    opt_stt_server: 'Server STT (Google)',
    opt_stt_browser: 'Browser STT (Web Speech)',
    opt_task2_standard: 'Standard (current flow)',
    opt_task2_vertex: 'Advanced Vertex (WebSocket)',
    btn_start: 'Start',
    btn_pause: 'Pause',
    btn_reset: 'Reset',
    btn_prev_question: 'Previous Question',
    btn_random_question: 'Random Question',
    btn_next_question: 'Next Question',
    btn_reveal_question: 'Reveal Question Text',
    btn_play_prompt: 'â–¶ Play Prompt',
    btn_start_recording: 'Start Recording',
    btn_stop_recording: 'Stop Recording',
    btn_copy_transcript: 'Copy Transcript',
    btn_copy_task2_eval: 'Copy Task 2 For Evaluation',
    btn_task2_connect: 'Connect Task 2 Live',
    btn_task2_disconnect: 'Disconnect Task 2 Live',
    btn_task2_send_live: 'Send Last Transcript To Examiner',
    btn_copy_task1: 'Copy Task 1',
    btn_copy_task2: 'Copy Task 2',
    btn_copy_task3: 'Copy Task 3',
    task_label_1: 'Task 1',
    task_label_2: 'Task 2',
    task_label_3: 'Task 3',
    status_idle: 'Idle',
    month_february: 'February',
    month_january: 'January',
    bank_all: 'All',
    status_disconnected: 'Disconnected',
    speaking_hint_vertex: 'For Task 2 advanced mode, connect your Cloud Run WebSocket endpoint first.',
    task2_ws_url_placeholder: 'wss://your-cloud-run-url/ws/task2-live',
    footer_copy: 'Â© 2026 DRC Systems. All rights reserved.',
    video_not_supported: 'Your browser does not support the video tag.',
  },
  fr: {
    nav_brand: 'Simulateur TCF',
    nav_home: 'Accueil',
    nav_practice: "Examen d'entraÃ®nement",
    nav_listening: 'ComprÃ©hension orale',
    nav_reading: 'ComprÃ©hension Ã©crite',
    nav_writing: 'Expression Ã©crite',
    nav_speaking: 'Expression orale',
    lang_button: 'FranÃ§ais (QuÃ©bec)',
    lang_option_en: 'English ðŸ‡¨ðŸ‡¦',
    lang_option_fr: 'FranÃ§ais (QuÃ©bec)',

    home_eyebrow: 'PrÃ©paration TCF Canada',
    home_title: "PrÃ©parez-vous pour l'examen TCF Canada",
    home_lead:
      'EntraÃ®nez-vous en expression orale, expression Ã©crite, comprÃ©hension Ã©crite et comprÃ©hension orale au mÃªme endroit avec une approche de simulation complÃ¨te qui reproduit la pression rÃ©elle de lâ€™examen. Alternez entre des banques de questions mensuelles, rejouez les consignes orales et transcrivez vos rÃ©ponses parlÃ©es pour analyser la prononciation, la fluiditÃ© et la structure. Renforcez vos automatismes grÃ¢ce aux tÃ¢ches Ã©crites chronomÃ©trÃ©es, aux prompts dâ€™Ã©valuation prÃªts Ã  copier et aux ressources ciblÃ©es, afin que chaque sÃ©ance vous rapproche dâ€™un meilleur rendement CECR et NCLC.',
    home_what_title: 'Quâ€™est-ce que le TCF Canada ?',
    home_what_body:
      'Le TCF Canada est un test de franÃ§ais reconnu par les autoritÃ©s canadiennes pour les demandes dâ€™immigration Ã©conomique et de citoyennetÃ©. Il Ã©value votre niveau de A1 Ã  C2 selon le CECR.',
    home_exam_title: 'Structure de lâ€™examen (cliquez pour dÃ©velopper)',
    home_docs_title: 'Documents Ã  consulter',
    home_docs_manual: 'Manuel du candidat TCF (tÃ©lÃ©chargement)',
    home_docs_sheet: 'Fiche de prÃ©sentation TCF Canada (tÃ©lÃ©chargement)',
    home_key_title: 'Informations clÃ©s',
    home_key_1: 'DurÃ©e totale approximative : 2 h 47.',
    home_key_2: 'Les 4 modules sont obligatoires pour le TCF Canada.',
    home_key_3: 'Les rÃ©sultats sont gÃ©nÃ©ralement transmis aux centres sous 15 jours ouvrables.',
    home_key_4: 'Lâ€™attestation est valide 2 ans.',
    home_key_hint: 'Ce rÃ©sumÃ© suit la structure officielle du TCF Canada publiÃ©e par France Ã‰ducation international.',

    acc_listening_title: 'ComprÃ©hension orale',
    acc_reading_title: 'ComprÃ©hension Ã©crite',
    acc_speaking_title: 'Expression orale',
    acc_writing_title: 'Expression Ã©crite',

    listen_page_title: 'Ressources de comprÃ©hension orale',
    listen_page_lead: 'Utilisez ces ressources externes pour vous entraÃ®ner au module de comprÃ©hension orale du TCF Canada.',
    listen_res1_title: 'Tests de comprÃ©hension orale FreeTCF',
    listen_res1_desc:
      'SÃ©ries dâ€™Ã©coute de type pratique avec format QCM proche du TCF pour un entraÃ®nement chronomÃ©trÃ©.',
    listen_res2_title: 'TV5MONDE - PrÃ©paration au TCF',
    listen_res2_desc:
      'ActivitÃ©s dâ€™apprentissage structurÃ©es pour la prÃ©paration au TCF, incluant des exercices de comprÃ©hension orale Ã  diffÃ©rents niveaux.',
    listen_res3_title: 'RFI FranÃ§ais Facile - DiplÃ´mes et tests',
    listen_res3_desc:
      'Contenus de comprÃ©hension orale et dâ€™entraÃ®nement linguistique utiles pour les rÃ©flexes dâ€™Ã©coute et le vocabulaire.',
    read_page_title: 'Ressources de comprÃ©hension Ã©crite',
    read_page_lead: 'Travaillez vos stratÃ©gies de lecture et votre vitesse pour le TCF Canada.',
    read_res1_title: 'TV5MONDE - PrÃ©paration au TCF',
    read_res1_desc:
      'Utilisez cette page pour la prÃ©paration au TCF et accÃ©dez aux activitÃ©s de comprÃ©hension Ã©crite pour travailler les textes courts et longs.',
    read_res2_title: 'Tests de comprÃ©hension Ã©crite FreeTCF',
    read_res2_desc:
      'Tests de lecture orientÃ©s pratique avec format proche du TCF pour amÃ©liorer la gestion du temps et la prÃ©cision.',
    writing_page_title: 'Pratique de lâ€™expression Ã©crite',
    writing_page_lead: 'Simulez les 3 tÃ¢ches dâ€™Ã©criture avec minuterie et compteur de mots.',
    writing_panel_title: 'Expression Ã©crite',
    writing_panel_lead: 'Trois tÃ¢ches avec minuterie commune et compteurs de mots.',
    writing_total_time: 'Temps total',
    writing_task1_hint: 'RÃ©digez un message pratique court (courriel/note).',
    writing_task2_hint: 'RÃ©digez un texte dâ€™argumentation/opinion avec une structure claire.',
    writing_task3_hint: 'RÃ©digez une rÃ©ponse de comparaison/analyse avec des exemples.',
    writing_task1_placeholder: 'RÃ©digez votre rÃ©ponse de la tÃ¢che 1...',
    writing_task2_placeholder: 'RÃ©digez votre rÃ©ponse de la tÃ¢che 2...',
    writing_task3_placeholder: 'RÃ©digez votre rÃ©ponse de la tÃ¢che 3...',
    writing_copy_hint:
      'AprÃ¨s avoir terminÃ© cette tÃ¢che, cliquez sur le bouton puis collez le texte dans votre IA favorite pour Ã©valuer votre performance !',
    speaking_page_title: 'Pratique de lâ€™expression orale',
    speaking_page_lead: 'EntraÃ®nement des tÃ¢ches 2 et 3 avec Gemini TTS et Google STT.',
    speaking_panel_title: 'Expression orale',
    speaking_panel_lead: 'Prompts oraux des tÃ¢ches 2 et 3, relecture et transcription en direct.',
    speaking_warning_note:
      'Les enregistrements sont limitÃ©s Ã  1 minute seulement. Nos dÃ©veloppeurs travaillent Ã  lâ€™amÃ©lioration, restez Ã  lâ€™Ã©coute !',
    speaking_audio_settings: 'ParamÃ¨tres audio des consignes',
    speaking_hint_api: 'Utilisez le mode Gemini avec le serveur local et la variable GEMINI_API_KEY.',
    speaking_hint_replay: 'La consigne est lue Ã  voix haute. Utilisez la relecture au besoin.',
    speaking_task2_duration: 'Cette tÃ¢che dure 3 min 30.',
    speaking_task3_duration: 'Cette tÃ¢che dure 4 min 30.',
    speaking_transcript_placeholder: 'Votre transcription orale apparaÃ®tra ici...',
    label_tts_provider: 'Fournisseur TTS',
    label_gemini_voice: 'Voix Gemini',
    label_transcription_lang: 'Langue de transcription',
    label_transcription_engine: 'Moteur de transcription',
    label_task2_mode: 'Moteur de la tÃ¢che 2',
    label_task2_ws_url: 'URL WS Vertex de la tÃ¢che 2',
    label_transcript: 'Transcription',
    label_response: 'RÃ©ponse',
    opt_tts_gemini: 'Gemini TTS (serveur)',
    opt_tts_browser: 'Voix du navigateur (hors ligne)',
    opt_lang_frfr: 'FranÃ§ais (France)',
    opt_lang_frca: 'FranÃ§ais (Canada)',
    opt_stt_server: 'STT serveur (Google)',
    opt_stt_browser: 'STT navigateur (Web Speech)',
    opt_task2_standard: 'Standard (flux actuel)',
    opt_task2_vertex: 'Vertex avancÃ© (WebSocket)',
    btn_start: 'DÃ©marrer',
    btn_pause: 'Pause',
    btn_reset: 'RÃ©initialiser',
    btn_prev_question: 'Question prÃ©cÃ©dente',
    btn_random_question: 'Question alÃ©atoire',
    btn_next_question: 'Question suivante',
    btn_reveal_question: 'Afficher le texte de la question',
    btn_play_prompt: 'â–¶ Lire la consigne',
    btn_start_recording: 'DÃ©marrer lâ€™enregistrement',
    btn_stop_recording: 'ArrÃªter lâ€™enregistrement',
    btn_copy_transcript: 'Copier la transcription',
    btn_copy_task2_eval: 'Copier la tÃ¢che 2 pour Ã©valuation',
    btn_task2_connect: 'Connecter la tÃ¢che 2 en direct',
    btn_task2_disconnect: 'DÃ©connecter la tÃ¢che 2 en direct',
    btn_task2_send_live: "Envoyer la derniÃ¨re transcription Ã  l'examinateur",
    btn_copy_task1: 'Copier la tÃ¢che 1',
    btn_copy_task2: 'Copier la tÃ¢che 2',
    btn_copy_task3: 'Copier la tÃ¢che 3',
    task_label_1: 'TÃ¢che 1',
    task_label_2: 'TÃ¢che 2',
    task_label_3: 'TÃ¢che 3',
    status_idle: 'Inactif',
    month_february: 'FÃ©vrier',
    month_january: 'Janvier',
    bank_all: 'Toutes',
    status_disconnected: 'DÃ©connectÃ©',
    speaking_hint_vertex: 'Pour le mode avancÃ© de la tÃ¢che 2, connectez dâ€™abord votre endpoint WebSocket Cloud Run.',
    task2_ws_url_placeholder: 'wss://votre-cloud-run/ws/task2-live',
    footer_copy: 'Â© 2026 DRC Systems. Tous droits rÃ©servÃ©s.',
    video_not_supported: 'Votre navigateur ne prend pas en charge la balise vidÃ©o.',
  },
};

window.applyTranslations = function applyTranslations(lang) {
  const dict = I18N[lang] || I18N.en;
  document.documentElement.lang = lang === 'fr' ? 'fr-CA' : 'en';
  document.body.classList.toggle('lang-fr', lang === 'fr');

  document.querySelectorAll('[data-i18n]').forEach((el) => {
    const key = el.dataset.i18n;
    if (dict[key]) {
      el.textContent = dict[key];
    }
  });

  document.querySelectorAll('[data-i18n-placeholder]').forEach((el) => {
    const key = el.dataset.i18nPlaceholder;
    if (dict[key]) {
      el.setAttribute('placeholder', dict[key]);
    }
  });

  const langButton = document.querySelector('.lang-toggle .lang-label');
  if (langButton) {
    langButton.textContent = dict.lang_button;
  }
};
